box: wercker/ruby
build:
  steps:
    - bundle install
    - script:
        name: sass compile
        code: bundle exec sass --style compressed assets/scss/styles.scss:assets/css/styles.min.css --debug-info
    - script:
        name: generate site
        code: bundle exec jekyll build
deploy :
  steps :
    - script :
        name : Amazon S3
        code : |
            cd $HOME",
            wget -O- -q http://s3tools.org/repo/deb-all/stable/s3tools.key | sudo apt-key add -
            sudo wget -O/etc/apt/sources.list.d/s3tools.list http://s3tools.org/repo/deb-all/stable/s3tools.list
            sudo apt-get update && sudo apt-get install s3cmd
            echo '[default]' > .s3cfg
            echo \"access_key=$AWS_ACCESS_KEY_ID\" >> .s3cfg
            echo \"secret_key=$AWS_SECRET_ACCESS_KEY\" >> .s3cfg
            cd $WERCKER_ROOT/_site
            s3cmd sync --acl-public --delete-removed --verbose ./ $AWS_BUCKET_URL

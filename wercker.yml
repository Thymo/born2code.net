box: wercker/ruby
build:
  steps:
    - bundle install
    - script:
        name: sass compile
        code: bundle exec sass --style compressed assets/scss/styles.scss:assets/css/styles.min.css --debug-info
    - script:
        name: generate staging
        code: bundle exec jekyll build --draft -d ./_staging
    - script:
        name: generate production
        code: bundle exec jekyll build --draft -d ./_production
deploy :
  steps :
    - s3sync:
        key_id: $AWS_ACCESS_KEY_ID
        key_secret: $AWS_SECRET_ACCESS_KEY
        bucket_url: $AWS_BUCKET_URL
        source_dir: $SOURCE_DIR

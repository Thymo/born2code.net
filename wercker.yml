box: wercker/ruby
build:
  steps:
    - bundle install
    - script:
        name: sass compile
        code: bundle exec sass --style compressed assets/scss/styles.scss:assets/css/styles.min.css --debug-info
    - script:
        name: generate site
        code: |
            if [[ "$JEKYLL_INCLUDE_DRAFTS" = "true" ]] ;
            then
                bundle exec jekyll build --drafts
            else
                bundle exec jekyll build
            fi
deploy :
  steps :
    - script:
        name: adjust server time
        code: sudo ntpdate pool.ntp.org
    - s3sync
